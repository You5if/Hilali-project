<form [dir]="direction" #journalentryForm="ngForm" >
  <div class="cardMain">
    <div class="bigMain" fxLayout>
      <h3 class="fontY">
        {{ dialog_title  }} 
      </h3>
      <img (click)="onCancel()" class="cancel_Img" src="../../../../assets/images/svg/close.png" alt="">
    </div>
    <div fxLayoutWrap fxLayoutGap="10px">
      <section class="fixed" fxLayout="column" fxLayoutGap.gt-md="20px" fxLayoutAlign="center top">
                  <mat-list fxLayout="row" fxLayoutGap.gt-md="15px">
                      <!-- Fields come here -->

          <div fxHide.lt-md fxLayout="column" fxLayoutGap="20px">
            <div fxLayout.gt-xs fxLayout.xs="column">
              <mat-list-item>
                <div class="check" fxLayout fxLayoutGap="10px">
                  <mat-form-field class="matR" appearance="outline">
                    <mat-label>Reference</mat-label>
                    <input class="inp" [ngModelOptions]="{standalone: true}" (input)="onRefChange($event.target.value)"  matInput   [placeholder]="reference" type="text" [(value)]="refr"  [(ngModel)] = "refr" [readonly]= "pModel.readOnly"  >
                  </mat-form-field>
                  <mat-checkbox class="cheBot" [(ngModel)]="referenceLock" name="reference">{{lock}}</mat-checkbox>
                </div>
              </mat-list-item>
              <mat-list-item>            
                <mat-form-field appearance="outline" class="matD">
                     <mat-label>{{dated}}</mat-label>          
                      <input matInput name="date" 
                      [placeholder]="dated"
                       type="date" [(ngModel)] = "pModel.entryDate" [readonly]= "pModel.readOnly"  >           
                     </mat-form-field>          </mat-list-item>
            <mat-list-item>
              <mat-form-field class="matC" appearance="outline">
                <mat-select matNativeControl name="currency" [placeholder]="currency"
                  [(ngModel)]="pModel.currency" [disabled]="pModel.readOnly">
                  <mat-option *ngFor="let item of currencyType" [value]="item.id">
                    {{item.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              </mat-list-item>
            </div>
            <mat-list-item>
              <div class="check" fxLayout fxLayoutGap="10px">
                <mat-form-field class="matR" appearance="outline">
                  <mat-label>Narration</mat-label>
                  <input class="inp"  [ngModelOptions]="{standalone: true}" class="description" (input)="onNarrChange($event.target.value)" matInput  [placeholder]="narration" type="textArea" [(value)]="narr"   [(ngModel)] = "narr" [readonly]= "pModel.readOnly"  >
                </mat-form-field>
                <mat-checkbox class="cheBot" [(ngModel)]="narrationLock" name="narration">{{lock}}</mat-checkbox> </div>
              </mat-list-item>

          </div>
          <div fxHide.gt-sm fxLayout="column" fxLayoutGap="20px">
            
              <mat-list-item>
                <div class="check" fxLayout fxLayoutGap="10px">
                  <mat-form-field class="matR" appearance="outline">
                    <mat-label>Reference</mat-label>
                    <input class="inp"  [ngModelOptions]="{standalone: true}" (input)="onRefChange($event.target.value)"  matInput   [placeholder]="reference" type="text" [(value)]="refr"  [(ngModel)] = "refr" [readonly]= "pModel.readOnly"  >
                  </mat-form-field>
                  <mat-checkbox class="cheBot" [(ngModel)]="referenceLock" name="reference">{{lock}}</mat-checkbox>
                </div>
              </mat-list-item>
              <mat-list-item class="control">
                <div class="check" fxLayout fxLayoutGap="10px">
                  <mat-form-field class="matR" appearance="outline">
                    <mat-label>Narration</mat-label>
                    <input class="inp"  [ngModelOptions]="{standalone: true}" class="description" (input)="onNarrChange($event.target.value)" matInput  [placeholder]="narration" type="textArea" [(value)]="narr"   [(ngModel)] = "narr" [readonly]= "pModel.readOnly"  >
                  </mat-form-field>
                  <mat-checkbox class="cheBot" [(ngModel)]="narrationLock" name="narration">{{lock}}</mat-checkbox> </div>
                </mat-list-item>
            <mat-list-item>            <mat-form-field appearance="outline" class="matD">   <mat-label>{{dated}}</mat-label>           <input matInput name="date" [placeholder]="dated" type="date" [(ngModel)] = "pModel.entryDate" [readonly]= "pModel.readOnly"  >            </mat-form-field>          </mat-list-item>
            <mat-list-item>
              <mat-form-field class="matC" appearance="outline">
                <mat-select matNativeControl name="currency" [placeholder]="currency"
                  [(ngModel)]="pModel.currency" [disabled]="pModel.readOnly">
                  <mat-option *ngFor="let item of currencyType" [value]="item.id">
                    {{item.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              </mat-list-item>
            
            

          </div>
                      <!-- Fields come here -->
                  </mat-list>

                  

              </section>

              <section class="add_section">

                <div>



                      <mat-accordion class="matAcc" *ngFor="let value of elem; let i = index" [attr.data-index]="i">

                        <mat-expansion-panel  class="accordion" (click)="openThis(value.value)" (opened)="hideTitle(value.value)" (closed)="showTitle(value.value)" [expanded]="value.collapse" hideToggle>
                          <mat-expansion-panel-header  >
                            <mat-panel-title class="alaa" *ngIf="value.numTitle">
                              <div>
                                <span>line </span>
                                <span> {{value.value}}</span>
                              </div>
                            </mat-panel-title>
                          </mat-expansion-panel-header>

                            <div fxLayout.gt-sm fxLayout.lt-md="column" class="firstline" fxLayoutGap="10px">
                              <!-- <mat-form-field>
                                <mat-label>account</mat-label>
                                <input [ngModelOptions]="{standalone: true}" [(ngModel)]="elem[i].accountId1" [value]="value.accountId1" appearance="outline" matInput  type="number">
                              </mat-form-field> -->
                              <mat-form-field>
                                <mat-label>{{acc}}</mat-label>
                                <mat-select [(ngModel)]="elem[i].accountId1" [ngModelOptions]="{standalone: true}">
                                  <mat-option *ngFor="let type of accountType" [value]="type.id">
                                    {{type.name}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <mat-form-field>
                                <mat-label>{{debit}}</mat-label>
                                <input [ngModelOptions]="{standalone: true}" [(ngModel)]="elem[i].debit1" [value]="value.debit1" matInput  type="textbox"
                                placeholder="Number"
                                appIsDecimalDirective>
                              </mat-form-field>
                              <mat-form-field>
                                <mat-label>{{credit}}</mat-label>
                                <input [ngModelOptions]="{standalone: true}" [(ngModel)]="elem[i].credit1" [value]="value.credit1"  disabled matInput  type="textbox"
                                placeholder="Number"
                                appIsDecimalDirective>
                              </mat-form-field>

                            </div>
                            <div fxLayout.gt-sm fxLayout.lt-md="column" class="firstline" fxLayoutGap="10px">
                              <!-- <mat-form-field>
                                <mat-label>account</mat-label>
                                <input [ngModelOptions]="{standalone: true}" [(ngModel)]="elem[i].accountId2" [value]="value.accountId2" appearance="outline" matInput  type="number">
                              </mat-form-field> -->
                              <mat-form-field>
                                <mat-label>{{acc}}</mat-label>
                                <mat-select [(ngModel)]="elem[i].accountId2" [ngModelOptions]="{standalone: true}">
                                  <mat-option *ngFor="let type of accountType" [value]="type.id">
                                    {{type.name}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <mat-form-field>
                                <mat-label>{{debit}}</mat-label>
                                <input [ngModelOptions]="{standalone: true}" [(ngModel)]="elem[i].debit2" [value]="value.debit2" disabled matInput  type="textbox"
                                placeholder="Number"
                                appIsDecimalDirective>
                              </mat-form-field>
                              <mat-form-field>
                                <mat-label>{{credit}}</mat-label>
                                <input [ngModelOptions]="{standalone: true}" [(ngModel)]="elem[i].credit2" [value]="value.debit1" disabled matInput   type="textbox"
                                placeholder="Number"
                                appIsDecimalDirective>
                              </mat-form-field>

                            </div>
                            <button mat-icon-button type="button" (click)="deleteFun(i)">
                              <mat-icon small class="mat-icon material-icons" role="img" aria-hidden="true" color="warn">
                                delete
                              </mat-icon>
                            </button>

                        </mat-expansion-panel>

                      </mat-accordion>


                    <!-- here -->
                    <!-- <mat-card (click)="collapsed=false"  class="cardcard">
                      <mat-card-title *ngIf="collapsed">{{value.value}}</mat-card-title>
                      <mat-card-content *ngIf="!collapsed">
                        <div>
                          <div class="firstline" fxLayoutGap="10px">
                            <mat-form-field>
                              <mat-label>account</mat-label>
                              <input appearance="outline" matInput name="account"  type="number">
                            </mat-form-field>
                            <mat-form-field>
                              <mat-label>debit</mat-label>
                              <input [ngModel]="input1" (ngModelChange)="getChange($event)" matInput name="debit"  type="number">
                            </mat-form-field>
                            <mat-form-field>
                              <mat-label>credit</mat-label>
                              <input disabled matInput name="credit"  type="number">
                            </mat-form-field>

                          </div>
                          <div class="firstline" fxLayoutGap="10px">
                            <mat-form-field>
                              <mat-label>account</mat-label>
                              <input appearance="outline" matInput name="account"  type="number">
                            </mat-form-field>
                            <mat-form-field>
                              <mat-label>debit</mat-label>
                              <input disabled matInput name="debit"  type="number">
                            </mat-form-field>
                            <mat-form-field>
                              <mat-label>credit</mat-label>
                              <input [ngModel]="input2" disabled matInput name="credit"  type="number">
                            </mat-form-field>

                          </div>
                        </div>
                      </mat-card-content>

                    </mat-card> -->


                  <!-- <button (click)="addControl()">Add</button> -->

                </div>

                </section>
                <div class="cen">
                  <button mat-raised-button class="add_btn"  type="button" (click)="addControl();">
                    + Add more
                    </button>
                </div>
              </div>
              <div class="btn-container" fxLayoutGap="10px">
                <button class="BtnC" type="button" (click)="onCancel(); $event.preventDefault()" mat-button color="warn">{{cancel}}</button>
                <button class="BtnS" type="button" (click)="onSubmit(); $event.preventDefault()" mat-button color="primary" >{{submit}}</button>
              </div>
</div>
</form>
